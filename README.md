# Satellite 6 TFTP boot file legacy grub conversion script

## Introduction 

This script is used to convert the tftp boot files (found in /var/lib/tftpboot/pxelinux.cfg/) which are automatically generated by Satellite 6 into the old legacy grub format. 

Why is this useful? Recently I encountered some HP servers which have an additional 10GbE card in one of the PCI-E slots on the machine which is used for the PXE boot. 

Unfortunately this additional interface only supports UEFI boot and not classic bios boot. By default Satellite 6 uses the shim image for UEFI(https://github.com/rhinstaller/shim) but this doesn't work with the older Linux kernel used by RHEL6.X (https://github.com/rhinstaller/shim/issues/65). 

If this script is executed on a capsule or satellite server which has TFTP enabled, it will automatically replace the boot files using the old format which gives a successful boot for RHEL6. 

## Issues and Todo. 

- The syntax of the boot files changed in Satellite 6.1.X to 6.2, for some reason the file now uses upper case names, this was fixed. 
- If the machine is booted before the script has executed, it will fail to boot. You should wait 1-3 minutes for the script to run before booting a machine. 
- Once a machine has its operating installed, the boot order should be changed so network boot is low priority. The current script doesn't provide a 'local boot' option like in grub2, so the machine will fail to boot after its OS has been installed previously. 

## How to configure the script. 

There are multiple steps to configuring the boot. First off, we need to modify the dhcp configuration to pickup the legacy grub config instead of the config automatically setup by Satellite. 

* Note that if you modify the dhcp config, you should modify your katello install options so the configuration is not replaced after an upgrade/re-run of satellite installer. 

###